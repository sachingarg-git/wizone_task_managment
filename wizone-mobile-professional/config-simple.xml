<?xml version='1.0' encoding='utf-8'?>
<widget id="com.wizone.taskmanager" version="1.0.0" xmlns="http://www.w3.org/ns/widgets" xmlns:cdv="http://cordova.apache.org/ns/1.0">
    <name>Wizone Task Manager</name>
    <description>
        Professional task management application with real-time updates and file handling capabilities.
    </description>
    <author email="support@wizone.com" href="https://wizone.com">
        Wizone Team
    </author>
    
    <!-- Content source -->
    <content src="index.html" />
    
    <!-- Global preferences -->
    <preference name="DisallowOverscroll" value="true" />
    <preference name="android-minSdkVersion" value="22" />
    <preference name="android-targetSdkVersion" value="33" />
    <preference name="BackupWebStorage" value="none" />
    <preference name="SplashMaintainAspectRatio" value="true" />
    <preference name="FadeSplashScreenDuration" value="300" />
    <preference name="SplashShowOnlyFirstTime" value="false" />
    <preference name="SplashScreen" value="screen" />
    <preference name="SplashScreenDelay" value="3000" />
    <preference name="AutoHideSplashScreen" value="false" />
    <preference name="ShowSplashScreenSpinner" value="false" />
    
    <!-- Allow navigation to external URLs -->
    <allow-navigation href="http://103.122.85.61:4000/*" />
    <allow-navigation href="https://*/*" />
    <allow-navigation href="http://*/*" />
    <allow-navigation href="data:*" />
    
    <!-- Allow access to all domains -->
    <access origin="*" />
    
    <!-- Allow intent for external applications -->
    <allow-intent href="http://*/*" />
    <allow-intent href="https://*/*" />
    <allow-intent href="tel:*" />
    <allow-intent href="sms:*" />
    <allow-intent href="mailto:*" />
    <allow-intent href="geo:*" />
    
    <!-- Platform specific configurations -->
    <platform name="android">
        <!-- Android specific preferences -->
        <preference name="Fullscreen" value="false" />
        <preference name="Orientation" value="portrait" />
        <preference name="LoadUrlTimeoutValue" value="60000" />
        <preference name="AndroidPersistentFileLocation" value="Compatibility" />
        <preference name="AndroidExtraFilesystems" value="files,files-external,documents,sdcard,cache,cache-external,assets,root" />
        <preference name="GradlePluginVersion" value="7.1.1" />
        <preference name="AndroidXEnabled" value="true" />
        
        <!-- Permissions -->
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
        <uses-permission android:name="android.permission.CAMERA" />
        <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.RECORD_AUDIO" />
        <uses-permission android:name="android.permission.VIBRATE" />
        <uses-permission android:name="android.permission.WAKE_LOCK" />
        
        <!-- Network security config for HTTP connections -->
        <config-file target="AndroidManifest.xml" parent="/manifest/application">
            <meta-data android:name="android.net.usesCleartextTraffic" android:value="true" />
        </config-file>
        
        <!-- Allow HTTP traffic -->
        <allow-intent href="market:*" />
    </platform>
    
    <!-- Essential plugins only -->
    <plugin name="cordova-plugin-whitelist" spec="^1.3.5" />
    <plugin name="cordova-plugin-statusbar" spec="^2.4.2">
        <preference name="StatusBarOverlaysWebView" value="false" />
        <preference name="StatusBarBackgroundColor" value="#2c5aa0" />
        <preference name="StatusBarStyle" value="lightcontent" />
    </plugin>
    
    <!-- Device and system plugins -->
    <plugin name="cordova-plugin-device" spec="^2.1.0" />
    <plugin name="cordova-plugin-network-information" spec="^3.0.0" />
    <plugin name="cordova-plugin-camera" spec="^6.0.0">
        <variable name="ANDROID_SUPPORT_V4_VERSION" value="27.+" />
        <variable name="CAMERA_USAGE_DESCRIPTION" value="This app needs access to camera to take photos for task updates." />
        <variable name="PHOTOLIBRARY_USAGE_DESCRIPTION" value="This app needs access to photo library to select images for task updates." />
    </plugin>
    <plugin name="cordova-plugin-file" spec="^7.0.0" />
    <plugin name="cordova-plugin-splashscreen" spec="^6.0.0" />
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval' 'unsafe-inline';
        style-src 'self' 'unsafe-inline';
        media-src *;
        img-src 'self' data: content: blob:;
        connect-src 'self' http://103.122.85.61:4000 ws://103.122.85.61:4000 wss://103.122.85.61:4000;
        script-src 'self' 'unsafe-inline' 'unsafe-eval';
    " />
</widget>